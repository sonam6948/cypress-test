"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.getPkgRootFromElectronBinary = getPkgRootFromElectronBinary;
exports.getConfigFromElectronBinary = getConfigFromElectronBinary;
exports.getServerInitFromElectronBinary = getServerInitFromElectronBinary;
var _fs = _interopRequireDefault(require("fs"));
var _os = require("os");
var _path = _interopRequireDefault(require("path"));
var _files = require("./files");
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function getPkgRootFromElectronBinary(binaryPath) {
    _fs.default.statSync(binaryPath);
    // MacOS
    // ~/Downloads/Cypress.app/Contents/MacOS/Cypress
    if ((0, _os).platform() === 'darwin') {
        return _path.default.resolve(_path.default.resolve(binaryPath).split('Contents/MacOS/Cypress')[0] + '/Contents/Resources/app');
    }
    // Windows
    // ~/Downloads/Cypress/Cypress.exe
    if ((0, _os).platform() === 'win32') {
        return _path.default.resolve(_path.default.resolve(binaryPath).split('/Cypress.exe')[0] + '/resources/app');
    }
    // linux
    // > ~/Downloads/Cypress/Cypress
    return _path.default.resolve(_path.default.dirname(_path.default.resolve(binaryPath)) + '/resources/app');
}
function getConfigFromElectronBinary(binaryPath) {
    _fs.default.statSync(binaryPath);
    return (0, _files).getConfigFiles(getPkgRootFromElectronBinary(binaryPath));
}
function getServerInitFromElectronBinary(binaryPath) {
    _fs.default.statSync(binaryPath);
    return (0, _files).getServerInit(getPkgRootFromElectronBinary(binaryPath));
}
